@using Model.ViewModel
@model List<CartItem>
    @{ 
        decimal subtotal = 0;
        if (Model != null && Model.Count() > 0)
        {
            subtotal = Model.Sum(s => s.Price * s.Quantity);
        }
    }

<div class="table-responsive cart_info">

    @if (Model != null)
    {
        <table class="table table-condensed" width="100%">
            <thead>
                <tr class="cart_menu">
                    <td class="image" colspan="2" align="center">Sản phẩm</td>
                    <td class="price" align="center">Giá</td>
                    <td class="quantity" align="center">Số lượng</td>
                    <td width="150" class="total" colspan="2" align="center">Tổng</td>
                </tr>
            </thead>
            <tbody>
                @if (Model.Count > 0)
                {
                    foreach (var item in Model)
                    {
                        string link = Url.Action("Detail", "Product", new { id = item.ProductId, metatitle = item.ProductAlias });
                        <tr>
                            <td class="cart_product" align="center">
                                <a href="@link" title="@item.ProductName"><img src="@Url.Content("~/Images/Products/min/" + item.ProductImage)" alt="@item.ProductName"></a>
                            </td>
                            <td class="cart_description" align="left">
                                <a href="@link" title="@item.ProductName">@item.ProductName</a>
                            </td>
                            <td class="cart_price" align="right">
                                @item.Price.ToString("N0") VNĐ
                            </td>
                            <td align="center">
                                @item.Quantity
                            </td>
                            <td class="cart_total" align="right" colspan="1">
                                <p class="cart_total_price">@((item.Price * item.Quantity).ToString("N0")) VNĐ</p>
                            </td>
                        </tr>
                    }
                    <tr>
                        <td colspan="3">&nbsp;</td>
                        <td colspan="2" align="right">
                            <br />

                            <table class="table table-condensed total-result" width="250" style="width:280px;">
                                <tr>
                                    <td>Tiền hàng</td>
                                    <td align="right">@subtotal.ToString("N0") VNĐ</td>
                                </tr>
                                <tr class="shipping-cost">
                                    <td>Tiền vận chuyển</td>
                                    <td align="right">0 VNĐ</td>
                                </tr>
                                <tr>
                                    <td>Tổng</td>
                                    <td align="right"><span>@subtotal.ToString("N0") VNĐ</span></td>
                                </tr>
                                <tr>
                                    <td colspan="2" align="right">
                                        <br />
                                        <button class="btn btn-danger" type="submit">Đặt hàng</button>
                                        <a class="btn btn-primary" href="@Url.Action("Index", "Home")">Tiếp tục mua hàng</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                }
                else
                {
                    <tr>
                        <td class="" colspan="5">
                            <p>
                                Không có sản phẩm nào trong giỏ hàng của bạn
                            </p>
                        </td>
                    </tr>
                }


            </tbody>
        </table>
    }
    else
    {
        <p>Bạn cần thêm sản phẩm vào giỏ hàng.</p>
    }
</div>
